

























































SUMEX Operator's Guide                                         October 1979



                      A Guide to the Operator's Guide
                      A Guide to the Operator's Guide
                      A Guide to the Operator's Guide
                      A Guide to the Operator's Guide





        This guide is intended to  serve as a reference for  frequently run

operator  jobs.  It  provides descriptions  of the  tasks, and  directs the

reader to more extensive documentation to be found elsewhere.   Examples of

dialogue used in each program are shown, and commonly  encountered problems

are discussed.  In dialogue, underlined or bold type is signify commands to

be typed in by the operator, parenthesized type are comments, and all other

text is type-out.  It is assumed the  operator is at least  partly familiar

with the TENEX EXEC; if not, the TENEX EXEC MANUAL/UPDATE will be helpful.

        The Operator's Guide is divided into two parts; one  part describes

operator duties on the SUMEX dual KI-10 system, the other  describes duties

on  the DECsystem  2020.  Each  part is  divided into  six  major sections:

Operator duties on the system, the archive/restore system (BSYS),  the file

backup system  (DUMPER), other miscellaneous  operator tasks,  bringing the

system up and down, and "What to do if..."

        Throughout this guide, these abbreviations are used:

        <cr>    for carriage return,
        <lf>    for line feed,
        <esc>   for escape or altmode,
        <del>   for delete or rubout, NOT backspace,
        ^X      means control-X, hold down control and type X, where
                X is any character.













October 1979                         i               SUMEX Operator's Guide



                             Table of Contents
                             Table of Contents
                             Table of Contents
                             Table of Contents





Section                                                                Page



    A Guide to the Operator's Guide .  .  .  .  .  .  .  .  .  .  .  .  . i


1.     The KI-10 System       .  .  .  .  .  .  .  .  .  .  .  .  .  .  . 1

       1.1    Operator Duties .  .  .  .  .  .  .  .  .  .  .  .  .  .  . 1

       1.2    BSYS            .  .  .  .  .  .  .  .  .  .  .  .  .  .  . 3

       1.3    DUMPER          .  .  .  .  .  .  .  .  .  .  .  .  .  .   13

       1.4    Other Operator Duties .  .  .  .  .  .  .  .  .  .  .  .   22

       1.5    Bringing the SUMEX dual KI-10's up and down   .  .  .  .   29

       1.6    What to do if   .  .  .  .  .  .  .  .  .  .  .  .  .  .   36


2.     The DECsystem 2020     .  .  .  .  .  .  .  .  .  .  .  .  .  .   40

       2.1    File Backup on the 2020  .  .  .  .  .  .  .  .  .  .  .   41

       2.2    Reloading Sumex-2020  .  .  .  .  .  .  .  .  .  .  .  .   42


    Index                     .  .  .  .  .  .  .  .  .  .  .  .  .  .   44



















SUMEX Operator's Guide              ii                         October 1979
KI-10                        The KI-10 System                     Section 1


        1    The KI-10 System
             The KI-10 System
             The KI-10 System
             The KI-10 System

        The SUMEX dual  KI-10 system consists  of two KI-10  PDP-10 central

processors in a  master <=> slave relationship,  serviced by 512K  words of

memory, three CALCOMP disk drives, two high-speed CALCOMP tape  drives, and

two DDC fixed head disks (also called drums) for swapping.   Each processor

has a  console terminal  which can  be used  for operator  tasks.  Operator

tasks should be done using the console terminal of the master  CPU, usually

the left processor, or if necessary the console of the other  CPU.  Refrain

from using the machine room Datamedia for operations duties, as no hardcopy

evidence of what you have done will remain.



        1.1    Operator Duties
               Operator Duties
               Operator Duties
               Operator Duties

        There  are three  major Operator  shifts at  SUMEX,  Weeknights and

Saturday afternoon, Sunday morning,  and Sunday night.  Each  shift demands

different duties  of its operators,  the chart on  the next  page indicates

duties to be performed on each major Operator shift.
























October 1979                         1               SUMEX Operator's Guide
KI-10                         Operator Duties                   Section 1.1



        Weeknights/Saturday   Sunday morning          Sunday night
        Weeknights/Saturday   Sunday morning          Sunday night
        Weeknights/Saturday   Sunday morning          Sunday night
        Weeknights/Saturday   Sunday morning          Sunday night


CHKPNT          Yes                Yes                        No
(Section 1.4.1)

DUMPER          Yes             Weekly Dump                   No
(Section 1.3)

DIRECTORY       No                 Yes                        No
PURGER
(Section 1.4.2)

ARCHIVES        Yes                Yes                        No
(Section )

RESTORES        Yes                Yes                        Yes
(Section 1.2.1)

NARROW          Yes                No                         Yes
LISTINGS
(Section 1.4.5.4)

DELD            No                 Yes                        No
(Section 1.4.3)

SAVEID          Yes                Yes                        No
(Section 1.4.4)

ARCHIVE WEEK'S  No                 Yes                        No
LISTING FILES
(Section 7)


        The  operator should  keep a  detailed record  of all  tasks he/she

performs.  For this purpose, there is a two-section Operator/System logbook

in the machine room.  All File Backup tasks are noted in the  section named

FILE BACKUP  LOG.  All  maintenance duties  (including bringing  the system

down for Preventative Maintenance  and reloading the system after  a crash)

are noted in the Maintenance section  of the logbook.  The Log is  the only

record of what has been done, so remember to fill it out!







SUMEX Operator's Guide               2                         October 1979
KI-10                              BSYS                         Section 1.2


        1.2    BSYS
               BSYS
               BSYS
               BSYS

        BSYS  (Backup SYStem)  is a  program written  especially  for TENEX

sites to handle all types of file system backups.  At SUMEX, DUMPER handles

the daily and weekly file  backups (see Section 1.3), so BSYS  handles only

file  archiving and  restoration.  Users  routinely archive  files  they no

longer  need, but  don't want  to delete  and expunge,  to  keep themselves

within  their  disk  space allocation.   Also,  every  Sunday,  the program

DIRECTORY-PURGER   (Section   1.4.2)  archives   the   files   from  users'

directories over allocation.  Users can get these files back  by requesting

their retrieval with the EXEC's RETRIEVE or INTERROGATE command.

        When you run BSYS, run ENABLED.  Many of BSYS's functions will tell

you  if you  need to  be enabled  to run  them; others  will appear  to run

correctly, but in actuality, will not have done what they were supposed to.

        BSYS  has  recently   been  updated  to  reasonable   line  editing

                                                    X
protocols.  Chief of these  is to kill a  line when   is  seen (previously,

<del> would kill the line).  When BSYS types a ? to faulty typein,  you can

enter the  the correct  information and continue  as nothing  incorrect had

been typed.

        Occasionally,  during a  file restore,  BSYS will  come  across bad

blocks of tape.  Depending on  the seriousness of the tape error,  BSYS can

usually recover.   Error messages such  as "Seq. Err:  #41 on tape  as #40,

next readable file is #41" are minor.  "Unrecoverable tape read error while

reading tape directory" indicates  major problems with the  tape directory;

attempt to  continue when BSYS  asks if you  want to; if  you can't  do the

restore, notify Bob Tucker and  he'll try to fix the  situation.  Sometimes

during Archiving,  BSYS runs across  physically bad blocks  of tape  in the



October 1979                         3               SUMEX Operator's Guide
KI-10                              BSYS                         Section 1.2


tape directory area.  It will notify the operator that it is  attempting to

rewrite the tape; if it tries to rewrite the same directory page  more than

20 times, give  up and notify Bob.   More complete documentation is  in the

BSYS manual, available online as <DOC>BSYS.MANUAL.

        User files  marked for  archiving by the  EXEC command  ARCHIVE are

written to tape  each evening using BSYS.   The files are written  onto two

tapes for redundancy.  It is intended that each even tape contain  the same

information  as  the   odd  tape  immediately  preceding;   however,  minor

differences  occur  when a  user  marks a  file  to be  archived  while the

operator is doing the archives.


!BSYS <cr>
 BSYS <cr>
 BSYS <cr>
 BSYS <cr>

TENEX-BSYS 2.06  3-APR-74

*A(rchive) <cr>
 A         <cr>
 A         <cr>
 A         <cr>

Archival period (days) = 9999 <cr>
                         9999 <cr>
                         9999 <cr>
                         9999 <cr>
Listing Only? No [Confirm] <cr>
              N            <cr>
              N            <cr>
              N            <cr>
Listing to file: Nil:<cr>
                 Nil:<cr>
                 Nil:<cr>
                 Nil:<cr>
Entire File System? Yes [Confirm] <cr>
                    Y             <cr>
                    Y             <cr>
                    Y             <cr>
enter tape unit (mtan:) MTA0: <cr>
                        MTA0: <cr>
                        MTA0: <cr>
                        MTA0: <cr>
new tape? No [Confirm] <cr>       (unless it is, see Section .2)
          N            <cr>
          N            <cr>
          N            <cr>
 is there a write ring in mounted tape? Yes <cr>
                                        Y   <cr>
                                        Y   <cr>
                                        Y   <cr>
   mounting tape directory


SUMEX tape number 427     archived files     Saturday, 4 MAR 79   12:35

ACCOUNTS                4 files                 162 pages
STEFIK                  3 files                  29 pages
KING                    3 files                  63 pages

Total Archived Files = 10
Total Archived Pages = 254

*A(rchive) <cr>
 A         <cr>
 A         <cr>
 A         <cr>

Archival period (days) = 9999 <cr>
                         9999 <cr>
                         9999 <cr>
                         9999 <cr>
Listing Only? No [Confirm] <cr>
              N            <cr>
              N            <cr>
              N            <cr>
Listing to file: Nil:<cr>
                 Nil:<cr>
                 Nil:<cr>
                 Nil:<cr>
Entire File System? Yes [Confirm] <cr>
                    Y             <cr>
                    Y             <cr>
                    Y             <cr>
enter tape unit (mtan:) MTA1: <cr>
                        MTA1: <cr>
                        MTA1: <cr>
                        MTA1: <cr>
new tape? No [Confirm] <cr>
          N            <cr>
          N            <cr>
          N            <cr>

SUMEX Operator's Guide               4                         October 1979
KI-10                              BSYS                         Section 1.2


 is there a write ring in mounted tape? Yes <cr>
                                        Y   <cr>
                                        Y   <cr>
                                        Y   <cr>
   mounting tape directory

SUMEX tape number 428     archived files     Saturday, 4 MAR 79   12:46

ACCOUNTS                4 files                 162 pages
STEFIK                  3 files                  29 pages
KING                    3 files                  63 pages

Total Archived Files = 10
Total Archived Pages = 254

*E(xit) <cr>
 E      <cr>
 E      <cr>
 E      <cr>
!


Make an  entry in  the File Backup  Log indicating  the archiving  has been

done.  Note down the number of the tape and number of pages written on that

tape for each tape.


        .1    Closing an old pair of tapes
              Closing an old pair of tapes
              Closing an old pair of tapes
              Closing an old pair of tapes

        When archive tapes  are nearly full,  new tapes should  be started.

You can tell if the tapes are  near full by looking at the evenness  of the

tape wound on  the reel.  Since archive  tapes are started new,  the unused

portion  of the  tape will  be  much smoother  than the  used  portion.  If

there's less than  half an inch  of new tape left,  and you know  there are

lots of files to archive (the  program ARCSTAT can tell you how  many files

are pending archive), start new tapes and close the current tapes.   If you

do an archive and  leave almost full tapes,  close those tapes so  the next

operator doesn't have to guess if the tapes are full.

        Alternatively, while the archives are running, the  tape's physical

EOT (End of Tape)  marker may be reached, in  which case BSYS will  ask for

new tapes.  It is better that you not let this happen, since the next tapes

will be dated the same as the old ones, which could be a week out earlier.

        Closing a pair of tapes:

!BSYS <cr>
 BSYS <cr>
 BSYS <cr>
 BSYS <cr>

October 1979                         5               SUMEX Operator's Guide
KI-10                  Closing an old pair of tapes             Section 1.2


TENEX-BSYS 2.06  3-APR-74

*L(isting of tape directory) <cr>
 L                           <cr>
 L                           <cr>
 L                           <cr>

enter tape unit (mtan:) MTA0: <cr>
                        MTA0: <cr>
                        MTA0: <cr>
                        MTA0: <cr>
listing to file: LPT: <cr>
                 LPT: <cr>
                 LPT: <cr>
                 LPT: <cr>
  mounting tape directory

SUMEX tape number 427     archived files     Saturday, 4 MAR 79   12:46

        (Now do the other tape, EVEN IF IT IS NOT FULL!)

*L(isting of tape directory) <cr>
 L                           <cr>
 L                           <cr>
 L                           <cr>

enter tape unit (mtan:) MTA1: <cr>
                        MTA1: <cr>
                        MTA1: <cr>
                        MTA1: <cr>
listing to file: LPT: <cr>
                 LPT: <cr>
                 LPT: <cr>
                 LPT: <cr>
  mounting tape directory

SUMEX tape number 428     archived files     Saturday, 4 MAR 79   12:46
*E(xit) <cr>
 E      <cr>
 E      <cr>
 E      <cr>
!

        The  above operation  produces a  listing of  the contents  of each

archive tape.  Remove the write  rings from both tapes, and place  the even

numbered tape on  the tape rack  in the machine  room and the  odd numbered

tape on the tape rack in TC101 (Mike's office).  The even listing  stays in

the machine room, in the folder  on the bookshelf, the odd listing  goes in

the folder on the bookshelf in the lobby of TC101, over the terminal.  Mark

in the COMMENTS column of the backup log that the tapes have been closed.


        .2    Opening a new pair of tapes
              Opening a new pair of tapes
              Opening a new pair of tapes
              Opening a new pair of tapes

        Note at this  point that the  following procedure will  destroy any

information currently on  the new pair of  tapes.  Be ABSOLUTELY  sure that

you are using the correct tape and make no careless errors in  mounting the

tape or referencing the tape drive!

!BSYS <cr>
 BSYS <cr>
 BSYS <cr>
 BSYS <cr>

TENEX-BSYS 2.06  3-APR-74

*A(rchive) <cr>
 A         <cr>
 A         <cr>
 A         <cr>

Archival period (days) = 9999 <cr>
                         9999 <cr>
                         9999 <cr>
                         9999 <cr>

SUMEX Operator's Guide               6                         October 1979
KI-10                   Opening a new pair of tapes             Section 1.2


Listing Only? No [Confirm] <cr>
              N            <cr>
              N            <cr>
              N            <cr>
Listing to file: Nil:<cr>
                 Nil:<cr>
                 Nil:<cr>
                 Nil:<cr>
Entire File System? Yes [Confirm] <cr>
                    Y             <cr>
                    Y             <cr>
                    Y             <cr>
enter tape unit (mtan:) MTA0: <cr>
                        MTA0: <cr>
                        MTA0: <cr>
                        MTA0: <cr>
new tape? Yes [Confirm] <cr>
          Y             <cr>
          Y             <cr>
          Y             <cr>
  really? Yes <cr>
          Y   <cr>
          Y   <cr>
          Y   <cr>
SUMEX tape number 429 <cr>   (for example)
                  429 <cr>
                  429 <cr>
                  429 <cr>

SUMEX tape number 429     archived files     Saturday, 4 MAR 79   12:35

ACCOUNTS                2 files                  83 pages
RINDFLEISCH             3 files                  40 pages
JFINGER                 3 files                  34 pages

Total Archived Files = 8
Total Archived Pages = 157

*A(rchive) <cr>
 A         <cr>
 A         <cr>
 A         <cr>

Archival period (days) = 9999 <cr>
                         9999 <cr>
                         9999 <cr>
                         9999 <cr>
Listing Only? No [Confirm] <cr>
              N            <cr>
              N            <cr>
              N            <cr>
Listing to file: Nil:<cr>
                 Nil:<cr>
                 Nil:<cr>
                 Nil:<cr>
Entire File System? Yes [Confirm] <cr>
                    Y             <cr>
                    Y             <cr>
                    Y             <cr>
enter tape unit (mtan:) MTA1: <cr>
                        MTA1: <cr>
                        MTA1: <cr>
                        MTA1: <cr>
new tape? Yes [Confirm] <cr>
          Y             <cr>
          Y             <cr>
          Y             <cr>
  really? Yes <cr>
          Y   <cr>
          Y   <cr>
          Y   <cr>
SUMEX tape number 430 <cr>
                  430 <cr>
                  430 <cr>
                  430 <cr>

SUMEX tape number 430     archived files     Saturday, 4 MAR 79   12:46

ACCOUNTS                2 files                  83 pages
RINDFLEISCH             3 files                  40 pages
JFINGER                 3 files                  34 pages

Total Archived Files = 8
Total Archived Pages = 157

*E(xit) <cr>
 E      <cr>
 E      <cr>
 E      <cr>
!



        .3    Archiving the Week's Listing Files,
              Archiving the Week's Listing Files,
              Archiving the Week's Listing Files,
              Archiving the Week's Listing Files,

        After the weekly dump is finished on Sunday afternoon,  the listing

files   which  DUMPER   created  during   Daily  dumps   (Section  1.3.1.1)

archived on a special set of tapes known as listing tapes.  There are three

sets of two tapes, providing  up to three months records of  daily listings




October 1979                         7               SUMEX Operator's Guide
KI-10               Archiving the Week's Listing Files,         Section 1.2


(somewhat longer than the period the daily dump tapes are kept).  A new set

of tapes  is used  at the  start of  each month,  recycling the  oldest set

currently on the tape rack.  NOTE: Months usually end in the middle  of the

week; there will be in the <DUMPER> listing files  named THIS-MONTH.DAY....

and files named LAST-MONTH.DAY...

        Archive last month's listing files by typing @ARCHIVE <DUMPER>LAST-
                                                      ARCHIVE <DUMPER>LAST-
                                                      ARCHIVE <DUMPER>LAST-
                                                      ARCHIVE <DUMPER>LAST-

MONTH.* <cr>.  Then  start up BSYS Archive  as usual, archiving  only those
MONTH.* <cr>
MONTH.* <cr>
MONTH.* <cr>

files from <DUMPER>, as below:

!BSYS <cr>
 BSYS <cr>
 BSYS <cr>
 BSYS <cr>

TENEX-BSYS 2.06  3-APR-74

*A(rchive) <cr>
 A         <cr>
 A         <cr>
 A         <cr>

Archival period (days) = 9999 <cr>
                         9999 <cr>
                         9999 <cr>
                         9999 <cr>
Listing Only? No [Confirm] <cr>
              N            <cr>
              N            <cr>
              N            <cr>
Listing to file: Nil:<cr>
                 Nil:<cr>
                 Nil:<cr>
                 Nil:<cr>
Entire File System? No [Confirm] <cr>
                    N            <cr>
                    N            <cr>
                    N            <cr>

Directory: DUMPER <cr>
           DUMPER <cr>
           DUMPER <cr>
           DUMPER <cr>
enter tape unit (mtan:) MTA0: <cr>
                        MTA0: <cr>
                        MTA0: <cr>
                        MTA0: <cr>
new tape? No [Confirm] <cr>       (unless it is, see Section .2)
          N            <cr>
          N            <cr>
          N            <cr>
 is there a write ring in mounted tape? Yes <cr>
                                        Y   <cr>
                                        Y   <cr>
                                        Y   <cr>
   mounting tape directory


tape number 1     archived files     Saturday, 4 MAR 79   12:35

DUMPER                  3 files                 600 pages

        Any more users? No <cr>
                        N  <cr>
                        N  <cr>
                        N  <cr>

Total Archived Files = 3
Total Archived Pages = 600

*A(rchive) <cr>
 A         <cr>
 A         <cr>
 A         <cr>

Archival period (days) = 9999 <cr>
                         9999 <cr>
                         9999 <cr>
                         9999 <cr>
Listing Only? No [Confirm] <cr>
              N            <cr>
              N            <cr>
              N            <cr>
Listing to file: Nil:<cr>
                 Nil:<cr>
                 Nil:<cr>
                 Nil:<cr>
Entire File System? No [Confirm] <cr>
                    N            <cr>
                    N            <cr>
                    N            <cr>

Directory: DUMPER <cr>
           DUMPER <cr>
           DUMPER <cr>
           DUMPER <cr>
enter tape unit (mtan:) MTA1: <cr>
                        MTA1: <cr>
                        MTA1: <cr>
                        MTA1: <cr>
new tape? No [Confirm] <cr>
          N            <cr>
          N            <cr>
          N            <cr>
 is there a write ring in mounted tape? Yes <cr>
                                        Y   <cr>
                                        Y   <cr>
                                        Y   <cr>

SUMEX Operator's Guide               8                         October 1979
KI-10               Archiving the Week's Listing Files,         Section 1.2


   mounting tape directory

tape number 2     archived files     Saturday, 4 MAR 79   12:46

DUMPER                  3 files                 600 pages

        Any more users? No <cr>
                        N  <cr>
                        N  <cr>
                        N  <cr>

Total Archived Files = 3
Total Archived Pages = 600

*

        Now  use  the  EXEC's  ARCHIVE  command  to  archive  this  month's

listings, and start a NEW pair of listing tapes from the oldest pair on the

shelf.  ARCHIVE AGAIN ONLY FROM DUMPER.  IF YOU ARCHIVE THE  ENTIRE SYSTEM,

YOU'LL BE ARCHIVING USERS' FILES ON THE WRONG TAPES!  Follow the directions

for starting new archive tapes (Section .2), but number the tapes 1 and 2.


        1.2.1    BSYS Restore
                 BSYS Restore
                 BSYS Restore
                 BSYS Restore

        The  files  which  users  request  (via  INTERROGATE,  RETRIEVE, or

ARCHED) to be restored are to be returned to the disk system by  using BSYS

in the RESTORE  or SINGLE mode.   This can be  done either by  running BSYS

Restore/Single directly,  or by  running the  automated BSYS  Retrieve.  In

either case,  a file named  RETRIEVE-REQUESTS.BINARY in  <ARCHIVE> contains

the names  of the  files to be  restored.  If  you're running  BSYS Restore

directly, you need to run the program RSTATS to get the names of the files;

if  you're running  the automated  retrieve (which  you'll do  most  of the

time), you need not worry, for BSYS will take care of everything.


        1.2.1.1    Running BSYS Restore directly
                   Running BSYS Restore directly
                   Running BSYS Restore directly
                   Running BSYS Restore directly

        Assuming  only one  retrieval  request exists,  the  dialogue below

shows how to  retrieve a file  from archive tapes.   If more than  one file

were requested, you'd do this for each.

!Conn <esc> ect (to directory) ARCHIVE <cr>
 Conn <esc>                    ARCHIVE <cr>
 Conn <esc>                    ARCHIVE <cr>
 Conn <esc>                    ARCHIVE <cr>

October 1979                         9               SUMEX Operator's Guide
KI-10                  Running BSYS Restore directly            Section 1.2


!BSYS <cr>
 BSYS <cr>
 BSYS <cr>
 BSYS <cr>

TENEX-BSYS    2.06   3-APR-74

*Res(tore) <cr>
 Res       <cr>
 Res       <cr>
 Res       <cr>

enter tape unit (mtan:) MTA0: <cr>
                        MTA0: <cr>
                        MTA0: <cr>
                        MTA0: <cr>
listing to file: NIL: <cr>
                 NIL: <cr>
                 NIL: <cr>
                 NIL: <cr>
  mounting tape directory

SUMEX tape number 428     archived files     Saturday, 4 MAR 79   12:46

restore MTA0: <KING>FILE.TXT <CR>
              <KING>FILE.TXT <CR>
              <KING>FILE.TXT <CR>
              <KING>FILE.TXT <CR>
 [Confirm] <cr>
           <cr>
           <cr>
           <cr>

        (If there are more restored to do on this tape, do them, else
         type <del> to return to the BSYS command mode.  If there are
         more restores to do on another tape, you'll have to return
         to the command mode and start Restore again.)

              X
              X
              X
              X
restore MTA0:   XXX

*E(xit) <cr>
 E      <cr>
 E      <cr>
 E      <cr>
!sndmsg <cr>
 sndmsg <cr>
 sndmsg <cr>
 sndmsg <cr>
To: king <cr>
    king <cr>
    king <cr>
    king <cr>
Cc: <cr>
    <cr>
    <cr>
    <cr>
Subject: file restore <cr>
         file restore <cr>
         file restore <cr>
         file restore <cr>
Message (end with ^Z):
Restored FILE.TXT to your directory.
Restored FILE.TXT to your directory.
Restored FILE.TXT to your directory.
Restored FILE.TXT to your directory.
John Q. Operator
John Q. Operator
John Q. Operator
John Q. Operator
^Z
^Z
^Z
^Z
king -- ok
!RSTAT <cr>
 RSTAT <cr>
 RSTAT <cr>
 RSTAT <cr>

        (If there are more restores to do, go back and do them)


        Make  a note  in the  File Backup  Log that  you have  done archive

restores.


        1.2.1.2    BSYS Single mode
                   BSYS Single mode
                   BSYS Single mode
                   BSYS Single mode

        There are cases when a file is to be restored to disk with either a

different name  or different directory  than it had  when it  was archived.

This is most common when a file from a directory no longer on the system is

to be restored.  To do this manually, use the BSYS Single mode:

!BSYS <cr>
 BSYS <cr>
 BSYS <cr>
 BSYS <cr>

SUMEX Operator's Guide              10                         October 1979
KI-10                        BSYS Single mode                   Section 1.2


TENEX-BSYS    2.06   3-APR-74

*S(ingle file) <cr>
 S             <cr>
 S             <cr>
 S             <cr>

enter tape unit (mtan:) MTA0: <cr>
                        MTA0: <cr>
                        MTA0: <cr>
                        MTA0: <cr>
  mounting tape directory

SUMEX tape number 428     archived files     Saturday, 4 MAR 79   12:46

copy MTA0: <KING>FILE.TXT;1 <cr>
           <KING>FILE.TXT;1 <cr>
           <KING>FILE.TXT;1 <cr>
           <KING>FILE.TXT;1 <cr>
 [Confirm] <cr>
           <cr>
           <cr>
           <cr>

to: <JONES>KING-FILE.TXT <cr>
    <JONES>KING-FILE.TXT <cr>
    <JONES>KING-FILE.TXT <cr>
    <JONES>KING-FILE.TXT <cr>
 [Confirm] <cr>
           <cr>
           <cr>
           <cr>

           X
           X
           X
           X
copy MTA0:   XXX

E(xit) <cr>
E      <cr>
E      <cr>
E      <cr>
!

        Make a  note in  the File Backup  Log that  you've done  an archive

retrieval.


        1.2.1.3    Letting BSYS Retrieve do the work
                   Letting BSYS Retrieve do the work
                   Letting BSYS Retrieve do the work
                   Letting BSYS Retrieve do the work

        In   the   automated   Retrieval   mode,   BSYS   reads   RETRIEVE-

REQUESTS.BINARY and prompts the operator to mount the correct tapes  on the

correct  drives.   Retrieve   handles  single-type  restores   (to  another

directory, see Section 1.2.1.2).  In case a file can not be restored during

a Retrieve session,  Retrieve marks that fact  in RETRIEVE-REQUESTS.BINARY,

and tries to restore the file on a later session.  For this reason,  do NOT

delete  RETRIEVE-REQUESTS.BINARY  under  any  circumstances!   The  request

blocks ARCHED and INTERROGATE use are re-used.
@BSYS <cr>
 BSYS <cr>
 BSYS <cr>
 BSYS <cr>

  TENEX-BSYS 5.01.06 7-AUG-79

*ret <cr>
 ret <cr>
 ret <cr>
 ret <cr>
Tape units [0,1,A]? A
                    A
                    A
                    A
Process retrieval requests for all users? yes <cr>
                                          y   <cr>
                                          y   <cr>
                                          y   <cr>

Tape numbers required:
458
461

October 1979                        11               SUMEX Operator's Guide
KI-10                Letting BSYS Retrieve do the work          Section 1.2


Mount SUMX tape 458 on MTA0:
Ok, Unusable,Postpone? [<cr>,U,P] <cr>
                                  <cr>
                                  <cr>
                                  <cr>
Listing to file: tty: <cr>
                 tty: <cr>
                 tty: <cr>
                 tty: <cr>

 Mounting tape directory

 BSYS 5.01.06

 SUMEX tape number 458  Archived files  7-June-79 2104

         [SUMX]<SCHOEN>OPGUIDE.WDS;2

Mount SUMX tape number 461 on MTA1:
Ok, Unusable,Postpone? [<cr>,U,P] U
                                  U
                                  U
                                  U
 !Tape is unuable, will try to retrieve from second tape!
*
        (Tape 461 wasn't in the machine room.  The next time you
         do restores, BSYS will [should] ask for tape 462.  Do
         the restore from that tape.  If both tape numbers come
         up odd, you must go to the tape room and get one of the
         tapes.)

*exit <cr>
 exit <cr>
 exit <cr>
 exit <cr>
































SUMEX Operator's Guide              12                         October 1979
KI-10                             DUMPER                        Section 1.3


        1.3    DUMPER
               DUMPER
               DUMPER
               DUMPER

        The DUMPER (actually MINI-DUMPER) program is used to write files to

tape for the  primary purpose of maintaining  a backup to the  disk system.

Files written to tape  with DUMPER can only  be retrieved by DUMPER  on the

KI-10 system, or possibly DUMPER on a TOPS-20 system (though apparently not

on SUMEX's  DECsystem-2020).  If you  have to transfer  files to  a TOPS-10

site, you should use  BACKUP (Type @help backup  <cr> to the exec  for more
                                    help backup  <cr>
                                    help backup  <cr>
                                    help backup  <cr>

info).  In case the KI-10  filesystem is completely wrecked, and has  to be

restored  from  scratch,  MINI-DUMPERS's  Load  command  will automatically

reload the  file system  (or in cases  of lesser  damage, restore  a single

directory).


        1.3.1    Backing up the file system with DUMPER
                 Backing up the file system with DUMPER
                 Backing up the file system with DUMPER
                 Backing up the file system with DUMPER

A collection of Annual, Semi-Annual, Quarterly, Monthly, Weekly,  and Daily

dumps is maintained.  All the dumps  except the Daily dump are done  in the

same manner, differing only in their retention period.  The  procedures for

the Weekly and  Daily dumps are described  below; the others  are described

only in how they differ from the Weekly dump.

        The Daily dump  consists only of files  which have been  created or

written  since  the  previous  Sunday's Weekly  dump.   This  dump  is done

weeknights  and  Saturday  afternoon.  Since  the  Daily  dump  records all

changed files since the previous  Weekly dump, and the Weekly  dump records

ALL the files on the system, in case of total disk destruction,  the system

can be restored to its condition  as of the last Daily dump  by referencing

only two sets of tapes.

        As in running BSYS, run ENABLED.  DUMPER will not dump files in any

other directory  other than  the one you  are connected  to unless  you are

enabled.

October 1979                        13               SUMEX Operator's Guide
KI-10             Backing up the file system with DUMPER        Section 1.3


        Also  like  BSYS,  DUMPER  often  responds  with  a  ?  when faulty

information is given to it.  If retyping correct information does not clear
                                         correct
                                         correct
                                         correct

up the difficulty, ^C, RESET, and start a new copy of DUMPER.   DUMPER does

not like to be restarted after a  ^C; it's best to get a fresh copy  of the

program.


        1.3.1.1    The Daily Dump
                   The Daily Dump
                   The Daily Dump
                   The Daily Dump

        The Daily dump library contains about 150 tapes, representing about

two months of backup.  At each dump, the oldest tapes are recycled.

        DUMPER creates a listing file when it runs, specifying each file in

each directory.  If the file was not dumped during a Daily dump (because it

hadn't been changed), DUMPER writes  down the last write date of  the file,

pointing you to the last set of tapes the file would be on (which may  be a

weekly dump tape).

        The  dialogue below  is  an example  of the  Daily  dump procedure.

Before  beginning   this,  copy   the  file   <OPERATOR>SPECIAL.MESSAGE  to

<SYSTEM>SPECIAL.MESSAGE to warn users that a dump is in progress,  and that

files  opened  in  Write  mode  will NOT  be  dumped.   After  the  dump is

completed, purge that file from <SYSTEM> so as not to confuse users.  Also,

before  running  the  dump,  you must  run  the  accounting  program CHKPNT

(Section 1.4.1).

!DUMPER <cr>
 DUMPER <cr>
 DUMPER <cr>
 DUMPER <cr>

MINI-DUMPER   28 APRIL 75

DUMP, LOAD, CHECK, OR SINGLE? D(ump) <cr>
                              D      <cr>
                              D      <cr>
                              D      <cr>

DUMP RANGE TYPE? W(hole) <cr>
                 W       <cr>
                 W       <cr>
                 W       <cr>
HAVE YOU RUN CHKPNT? Y <cr>
                     Y <cr>
                     Y <cr>
                     Y <cr>
INCREMENTAL DUMP? N <cr>
                  N <cr>
                  N <cr>
                  N <cr>
TYPE OF DUMP (D, M, S, W, OR ?): D <cr>
CHANGES FROM: LAST SUNDAY'S DATE 0600
          TO: TODAY'S DATE NOW                  RIGHT? Y <cr>
                                                       Y <cr>
                                                       Y <cr>
                                                       Y <cr>

SUMEX Operator's Guide              14                         October 1979
KI-10                         The Daily Dump                    Section 1.3


                                                (Unless it's wrong, then
                                                 type N <cr>)
                                                      N <cr>
                                                      N <cr>
                                                      N <cr>
PLEASE ENTER YOUR NAME: YOUR (USER) NAME <cr>
                        YOUR (USER) NAME <cr>
                        YOUR (USER) NAME <cr>
                        YOUR (USER) NAME <cr>

TYPE MAG TAPE UNIT NUMBER: 0 <cr>            (0 for mta0:, 1 for mta1:)
                           0 <cr>
                           0 <cr>
                           0 <cr>

TAPE  1   YOUR  NAME    LAST SUNDAY'S DATE 0600 TO TODAY'S DATE NOW

DIRECTORY       PAGES   DIR
---------       -----   ---
SYSTEM  1523    1                       (The spacing is poor...)
SCHULZ          2
NEWSYS    30    3
SUBSYS    25    4
ACCOUNTS        69      5               (...unless the name is long)



        Etc. etc. until  the first tape is  full.  Then DUMPER  rewinds the

first tape  and waits for  you to  specify the next  tape drive.   To speed

dumps, you can alternate tape  drives.  While one drive the  rewinding, you

can start the next tape on the other drive.

MOUNT NEXT TAPE
TYPE MAG TAPE UNIT NUMBER: 1 <cr>
                           1 <cr>
                           1 <cr>
                           1 <cr>


        Etc.  When DUMPER is finished,  it creates the listing file  in the

directory <DUMPER> and reconnects  to <OPERATOR>. The listing file  will be

called  MONTH.DAY--DATE--TIME;1  (TIME is  the  time the  dump  began), and

remains on the system until the next Sunday, when the week's  listing files

are archived  on listing tapes  (Section 7).  Mark  in the File  Backup Log

that you have run the dump.


        1.3.1.2    The Weekly Dump
                   The Weekly Dump
                   The Weekly Dump
                   The Weekly Dump

        Every Sunday at approximately 0800, a dump is started of  all files

on the  system except those  in opened  by users in  Write mode,  and those

files  named in  the file  <SYSTEM>DUMPER.EXCEPTIONS  (DUMPER automatically




October 1979                        15               SUMEX Operator's Guide
KI-10                         The Weekly Dump                   Section 1.3


avoids these files).   The weekly dump  library consists of  something over

120 tapes.   The oldest set  of weekly dump  tapes is recycled  each weekly

dump, so the library represents about 5 weeks of full backup.

        To maximize the use of the tape units, the dump is actually  run as

two separate jobs.  Each job dumps about half the file pages on the system.

DUMPER allows  you to specify  dump ranges  when you start  it up,  and the

program SPLIT in the operator's directory determines at which directory the

file page count splits.

        As before  the daily dumps,  you must run  CHKPNT.  Then,  copy the

<OPERATOR>SPECIAL.SUNDAY     to    <SYSTEM>SPECIAL.MESSAGE,     and    copy

<OPERATOR>SCHED-CTL.LIST  to  <SCHED-CTL>SCHED-CTL.LIST.   The  latter file

sets scheduler  limits on all  jobs except SYSTEM  jobs and  OPERATOR jobs.

The  SCHEDP  overload threshold  is  set  to 4.5  which  means  other users

(including yourself, if you're logged  in somewhere) do not get  much time;

two DUMPER jobs running at add three points to the load average!

        Below is an example of starting the two DUMPER jobs.  CTY0:  is the

console terminal of the master CPU, TENEX refers to it as TTY140:; CTY1: is

the slave CPU's  console, TTY141:.  As of  Fall, 1979, the file  page count

splits at directory 241.

On CTY0:

!DUMPER <cr>
 DUMPER <cr>
 DUMPER <cr>
 DUMPER <cr>

DUMP, LOAD, CHECK, OR SINGLE? D <cr>
                              D <cr>
                              D <cr>
                              D <cr>
DUMP RANGE TYPE? E(nd) <cr>
                 E     <cr>
                 E     <cr>
                 E     <cr>

END WITH USER: 212 <cr>      (or you could have typed POPLE <cr>)
               212 <cr>                               POPLE <cr>
               212 <cr>                               POPLE <cr>
               212 <cr>                               POPLE <cr>
INCREMENTAL DUMP? N <cr>
                  N <cr>
                  N <cr>
                  N <cr>
TYPE OF DUMP (D, M, S, W, OR ?): W <cr>
SEQUENCE LETTER: A <cr>  (The first half is A, the second half is B)

TYPE MAG TAPE UNIT NUMBER: 0 <cr>
                           0 <cr>
                           0 <cr>
                           0 <cr>

        (Etc. To avoid confusion, keep this half of the dump on MTA0:
         while you run the second half on MTA1:)

SUMEX Operator's Guide              16                         October 1979
KI-10                         The Weekly Dump                   Section 1.3


On CPU1:

!DUMPER <cr>
 DUMPER <cr>
 DUMPER <cr>
 DUMPER <cr>

DUMP, LOAD, CHECK, OR SINGLE? D <cr>
                              D <cr>
                              D <cr>
                              D <cr>
DUMP RANGE TYPE? S(tart) <cr>
                 S       <cr>
                 S       <cr>
                 S       <cr>

START WITH USER: 213 <cr>    (or FREER <cr>)
                 213 <cr>        FREER <cr>
                 213 <cr>        FREER <cr>
                 213 <cr>        FREER <cr>
INCREMENTAL DUMP? N <cr>
                  N <cr>
                  N <cr>
                  N <cr>
TYPE OF DUMP (D, M, S, W, OR ?): W <cr>
                              <cr>
                              <cr>
                              <cr>
SEQUENCE LETTER: B <cr>
                          Weekly Dump B <cr>
                          Weekly Dump B <cr>
                          Weekly Dump B <cr>

        (At this point, DUMPER may complain that it can't get the
         listing file, MINI-DUMP.LISTING; it will ask for the
         name of a listing file.  Give any reasonable file name.)

TYPE MAG TAPE UNIT NUMBER: 1 <cr>
                           1 <cr>
                           1 <cr>
                           1 <cr>

        (Etc.)


        When  the dump  is finished  (about 5  hours and  25 reels  of tape

later), each DUMPER job spools its listing to the lineprinter and outputs a

three-inch thick listing.  Mark the  listing (on the front edge)  with "WD"

followed by the date.  Since you've just recycled tapes from an  old weekly

dump, recycle that dump's listing.  Mark in the File Backup Log that you've

done the Weekly dump (check off  the dumper box, and write in  "WD").  Also

note "WD" in the MAINTENANCE section  of the logbook, on the same  line you

noted running CHKPNT.


        1.3.1.3    Monthly, Quarterly, Semi-annual, Annual Dumps
                   Monthly, Quarterly, Semi-annual, Annual Dumps
                   Monthly, Quarterly, Semi-annual, Annual Dumps
                   Monthly, Quarterly, Semi-annual, Annual Dumps

        The Monthly dump is simply  the last Weekly dump of the  month; the

Monthly dump tapes are kept for at least one year.  Instead of  recycling a

set  of Weekly  dump  tapes, recycle  the  next available  set  of Monthly,

Quarterly,  or Semi-Annual  Dump  tapes.  If  none are  available,  use new

tapes. The January, April, July and October tapes are  considered Quarterly

tapes,  and  are  kept for  two  years.   The January  and  July  tapes are




October 1979                        17               SUMEX Operator's Guide
KI-10          Monthly, Quarterly, Semi-annual, Annual Dumps    Section 1.3


considered Semi-Annual, and are kept  for four years.  The January  dump is

the Annual dump; no Annual dump tapes have ever been recycled.

        As well as following a normal weekly dump procedure on  these days,

you must also make a  special dump of <LEDERBERG>, <JL2>, and  <JL3>.  This

is done by answering List to DUMPER's question: "DUMP RANGE TYPE?"
                     List
                     List
                     List

!DUMPER <cr>
 DUMPER <cr>
 DUMPER <cr>
 DUMPER <cr>

MINI-DUMPER   28 APRIL  75
DUMP, LOAD, CHECK, OR SINGLE? D <cr>
                              D <cr>
                              D <cr>
                              D <cr>
DUMP RANGE TYPE? L(ist) <cr>
                 L      <cr>
                 L      <cr>
                 L      <cr>

USERS: LEDERBERG,JL2,JL3 <cr>
       LEDERBERG,JL2,JL3 <cr>
       LEDERBERG,JL2,JL3 <cr>
       LEDERBERG,JL2,JL3 <cr>
INCREMENTAL DUMP? N <cr>
                  N <cr>
                  N <cr>
                  N <cr>
TYPE OF DUMP (D, M, S, W, OR ?): S <cr>
EXCLUDE FILES WRITTEN BEFORE: <cr>
                              <cr>
                              <cr>
                              <cr>
TYPE IDENTIFICATION INFO: LEDERBERG, MONTH, YEAR <cr>
                          LEDERBERG, MONTH, YEAR <cr>
                          LEDERBERG, MONTH, YEAR <cr>
                          LEDERBERG, MONTH, YEAR <cr>

        (DUMPER dumps those directories and exits to the EXEC)


        Bring the tapes and the listing to TC101.  The tapes go on the back

wall of TC101A (the tape room,  you may need to rearrange) and  the listing

goes on  the shelf  above TC101's  lobby terminal,  where the  odd numbered

archive tape listings go.


        1.3.2    Reloading files from DUMPER tapes
                 Reloading files from DUMPER tapes
                 Reloading files from DUMPER tapes
                 Reloading files from DUMPER tapes

        When reloading  files from DUMPER  tapes the operator  should first

insure that a user's file of the same Name, Extension and Version currently

on the disk system will not be wiped out.  Check with the user if  there is

a chance that this will  happen.  Note that file names entered  into DUMPER

must  be fully  specified and  that the  operator must  be  ENABLED. DUMPER

commonly  reports the  absence of  a file  on a  given tape  because  of an

inadequate name specification, or because the operator isn't enabled.







SUMEX Operator's Guide              18                         October 1979
KI-10                       DUMPER Single mode                  Section 1.3


        1.3.2.1    DUMPER Single mode
                   DUMPER Single mode
                   DUMPER Single mode
                   DUMPER Single mode

        When reloading from a Full Dump the printed file list for that dump

must be referenced.  The  directories are dumped (and listed)  in directory

order.  The use  of the TRANSLATE  command in EXEC  can be used  to convert

directory names to numbers.  As  mentioned above, the locating of  the tape

number  indicators in  the  listing requires  considerable  searching.  The

listings and tapes for the Weekly dumps are kept in the machine room; those

for the  other full dumps  are kept in  room TC101.  The  following example

shows how a file is restored from a DUMPER tape in Single mode.

!DUMPER <cr>
 DUMPER <cr>
 DUMPER <cr>
 DUMPER <cr>

MINI-DUMPER  28 APRIL 75

DUMP, LOAD, CHECK, OR SINGLE? S <cr>
                              S <cr>
                              S <cr>
                              S <cr>
TYPE MAG TAPE UNIT NUMBER: 0 <cr>
                           0 <cr>
                           0 <cr>
                           0 <cr>

COPY <NOGA>SNOOPY.CALENDAR-77;1 <esc> TO
     <NOGA>SNOOPY.CALENDAR-77;1 <esc>
     <NOGA>SNOOPY.CALENDAR-77;1 <esc>
     <NOGA>SNOOPY.CALENDAR-77;1 <esc>
<NOGA>SNOOPY.;2 <cr>
<NOGA>SNOOPY.;2 <cr>
<NOGA>SNOOPY.;2 <cr>
<NOGA>SNOOPY.;2 <cr>

        (Dumper winds through the tape to find the file then
         restores it.)

COPY ^C
     ^C
     ^C
     ^C
!

        Mark  the  box  in  the File  Backup  Log  corresponding  to DUMPER

Restore.  If  DUMPER never finds  the file --  instead winding  through the

entire tape, then printing  END OF TAPE, FILE  NOT FOUND -- then  check the

listing  to  make sure  the  file was  dumped.   Don't be  confused  if the

filename is there; if  it has a date next  to it, it means the  file wasn't

dumped, and the  date listed is  the last Daily dump  the file would  be on

(you can use a weekly dump if  the last Daily dump is previous to  the last

Sunday).






October 1979                        19               SUMEX Operator's Guide
KI-10                        DUMPER Load mode                   Section 1.3


        1.3.2.2    DUMPER Load mode
                   DUMPER Load mode
                   DUMPER Load mode
                   DUMPER Load mode

        In  the Load  mode, Dumper  will find  all the  files  belonging to

either every directory on the system, or just a single directory,  and load

those files into  either their original  directories or into  the directory

the Operator is connected to.  The Load feature is used to restore  a large

number of files  to a disk  directory (in this  case, connect to  a scratch

directory such  as <NORMAL>  and reload the  files, copying  specified ones

into their original  directory), or to  restore the entire  disk filesystem

after catastrophic file system damage.  NEVER load a files back  into their

original  directory  unless  you  are positive  no  changed  files  will be

overwritten by the process.

        When loading  a single directory,  start with the  reel of  tape on

which that  directory was dumped;  do not  start with tape  #1 of  the tape

sequence if the file you want won't be on that tape.  DUMPER  will complain

that the tapes are not in sequence, but this is perfectly OK.

        Also, DUMPER will not stop once it has loaded the files of  all the

users requested.  You must ^C the job once it is done, or it  will continue

until all the tapes of the dump sequence are exhausted.

!DUMPER <cr>
 DUMPER <cr>
 DUMPER <cr>
 DUMPER <cr>

MINI-DUMPER   28 APRIL  75

DUMP, LOAD, CHECK, OR SINGLE? L(oad) <cr>
                              L      <cr>
                              L      <cr>
                              L      <cr>
SPECIFIC USERS? Y <cr>
                Y <cr>
                Y <cr>
                Y <cr>
USERS: USER-NAME <cr>
       USER-NAME <cr>
       USER-NAME <cr>
       USER-NAME <cr>
INTO SAME DIRECTORY(S)? N <cr>
                        N <cr>
                        N <cr>
                        N <cr>
(FILES WILL BE LOADED INTO CONNECTED DIRECTORY)
TYPE MAG TAPE UNIT NUMBER: 0 <cr>
                           0 <cr>
                           0 <cr>
                           0 <cr>

Tape  1         Weekly Dump A           March 12, 1979  0753
-------         -------------           --------------------
SYSTEM
SCHULZ
NEWSYS
SUBSYS
ACCOUNTS

SUMEX Operator's Guide              20                         October 1979
KI-10                        DUMPER Load mode                   Section 1.3


  .
  .
  .
USER-NAME
  .
^C
^C
^C
^C

















































October 1979                        21               SUMEX Operator's Guide
KI-10                      Other Operator Duties                Section 1.4


        1.4    Other Operator Duties
               Other Operator Duties
               Other Operator Duties
               Other Operator Duties

        Other Operator  duties during some  shifts include  running CHKPNT,

the   DIRECTORY-PURGER,  DELD,   SAVEID,  narrow   listings,   and  killing

directories. Check the table of operator duties (Section 1).


        1.4.1    CHKPNT
                 CHKPNT
                 CHKPNT
                 CHKPNT

        CHKPNT is an accounting program which keeps records of  file system

work and printer usage.  It is run before the Daily and Weekly dumps.

!<ACCOUNTS>CHKPNT <cr>
 <ACCOUNTS>CHKPNT <cr>
 <ACCOUNTS>CHKPNT <cr>
 <ACCOUNTS>CHKPNT <cr>

Do you want input parameters? N <cr>
                              N <cr>
                              N <cr>
                              N <cr>

Renaming FACT file...
<ACCOUNTS>FACT.6-JUNE-79-1600 [New File]
Renaming SPOOLR file...
<ACCOUNTS>SPOOLR.6-JUNE-79-1600 [New File]
Gathering system statistics...
        (That's all.  CHKPNT takes a few minutes to run.)
!

        Note in  the File  Backup Log  that you've  run CHKPNT.   If you're

working the Sunday morning shift, also note this in the Maintenance Log.


        1.4.2    The DIRECTORY-PURGER
                 The DIRECTORY-PURGER
                 The DIRECTORY-PURGER
                 The DIRECTORY-PURGER

        The DIRECTORY-PURGER  is a program  which scans the  filesystem and

marks old, unused files  in directories over allocation for  archiving.  It

runs nightly as a batch job,  but is also run on Sunday,  immediately after

the Weekly dump, but before the Archives.  Because its name  conflicts with

the  EXEC's DIRECTORY  command, use  the RUN  command to  specify  you want

DIRECTORY-PURGER.  The program takes almost ten minutes to run; be patient.

Archive the week's Daily dump listings while it's running.  Just  before it

finishes, DIRECTORY-PURGER rings your terminal's bell three times.

!DIRECTORY-PURGER <cr>
 DIRECTORY-PURGER <cr>
 DIRECTORY-PURGER <cr>
 DIRECTORY-PURGER <cr>
You are enabled
Summary files to file managers (Y or N)? Y <cr>
                                         Y <cr>
                                         Y <cr>
                                         Y <cr>
Archive files over project allocation (Y or N)? Y <cr>
                                                Y <cr>
                                                Y <cr>
                                                Y <cr>

SUMEX Operator's Guide              22                         October 1979
KI-10                      The DIRECTORY-PURGER                 Section 1.4


Loading project and user accounting tables
Checking NAMES.TXT consistency
Scanning file system
Trimming projects back to allocation and
   Generating summary files

<beep!> <beep!> <beep!>
End of SAIL Execution
!


        Note in the Maintenance Log that you've run the DIRECTORY-PURGER.


        1.4.3    DELD
                 DELD
                 DELD
                 DELD

        After  the  directory-purger has  run  and the  archives  are done,

almost  all the  files which  were archived  are deleted,  but  still using

directory space.  DELD is a program which scans the filesystem and expunges

deleted files.   It's run  only on  Sunday after  the archives,  and simply

requires that you type  DELD <cr> to the  exec.  However, as a  courtesy to
                        DELD <cr>
                        DELD <cr>
                        DELD <cr>

logged in users, notify that you are doing a system expunge.

!NOTIFY <cr>
 NOTIFY <cr>
 NOTIFY <cr>
 NOTIFY <cr>
TTYS: -1 <cr>
      -1 <cr>
      -1 <cr>
      -1 <cr>
MESSAGE: !!! System-wide expunge commences in five minutes !!! ^D
         !!! System-wide expunge commences in five minutes !!! ^D
         !!! System-wide expunge commences in five minutes !!! ^D
         !!! System-wide expunge commences in five minutes !!! ^D
!!! System-wide expunge commences in five minutes !!!
        (Wait five minutes.)
!DELD <cr>
 DELD <cr>
 DELD <cr>
 DELD <cr>
START 5490 PAGES LEFT
STOP 18511 PAGES LEFT
        (Then notify users you're done with the expunge.)
!NOTIFY <cr>
 NOTIFY <cr>
 NOTIFY <cr>
 NOTIFY <cr>
TTYS: -1 <cr>
      -1 <cr>
      -1 <cr>
      -1 <cr>
MESSAGE: (Operator, TTY140: System expunge completed) ^D
         (Operator, TTY140: System expunge completed) ^D
         (Operator, TTY140: System expunge completed) ^D
         (Operator, TTY140: System expunge completed) ^D
(Operator, TTY100: System expunge completed)
!


        Note  down in  the Maintenance  log that  you've run  DELD  and the

number of pages left before and after running it: DELD (5490 ==> 18511).








October 1979                        23               SUMEX Operator's Guide
KI-10                             SAVEID                        Section 1.4


        1.4.4    SAVEID
                 SAVEID
                 SAVEID
                 SAVEID

        SAVEID is  a program  which records  on a  DECtape the  file system

index  blocks.   That information  can  be  used to  aid  in  restoring the

filesystem  in case  of serious  filesystem damage.   There are  two SAVEID

DECtapes, one for odd numbered days and one for even numbered days.  To run

the program, mount the  proper DECtape on one  of the two drives;  the left

drive is DTA0:, the right is DTA1:.  Place the select switch in  LOCAL, and

advance the  tape a few  seconds by pressing  the top middle  rocker switch

(with the arrows pointing to the left and right).  Then select  REMOTE mode

and WRITE ENABLE.  On one of the console terminals:

!MOUNT DTA0: <cr>
 MOUNT DTA0: <cr>
 MOUNT DTA0: <cr>
 MOUNT DTA0: <cr>
!SAVEID <cr>
 SAVEID <cr>
 SAVEID <cr>
 SAVEID <cr>

SAVE THIS ON FILE: DTA0:SAVEID.SAV <cr> [Old File] <cr>
                   DTA0:SAVEID.SAV <cr>            <cr>
                   DTA0:SAVEID.SAV <cr>            <cr>
                   DTA0:SAVEID.SAV <cr>            <cr>
        (SAVEID takes about 30 seconds to complete.)



        1.4.5    Handling the Lineprinter
                 Handling the Lineprinter
                 Handling the Lineprinter
                 Handling the Lineprinter

        Several tasks are described here related to the lineprinter some of

them involve the  mechanical aspects of  the printer (loading  paper, etc),

while other involve  information on the basic  tasks of managing  the print

queue.


        1.4.5.1    Loading Paper
                   Loading Paper
                   Loading Paper
                   Loading Paper

        This is the most common task associated with the line printer.  The

first step  is to  place the printer  "Off Line"  using the  correct toggle

switch on  printer switch  panel.  Access is  gained to  the paper  area by

opening the drum gate whose release is the under the main cover and  to the

right side of the machine (large plastic knob, move left and up.  Do a form

feed (toggle switch on switch panel) to reset the positioning system.  Open



SUMEX Operator's Guide              24                         October 1979
KI-10                          Loading Paper                    Section 1.4


the  tractor  gates and  place  the paper  on  the tractors  such  that the

horizontal perforation is just below the small black arrow at the  left end

of the print hammers (about 6 inches below the tractors). Shut  the tractor

gates and do a form feed to  make sure that all goes well.  Close  and lock

the drum gate, wait  for the READY light to  come on, and try  another form

feed.  Put the printer ON-LINE with the appropriate toggle switch.

        Important notes: Always leave at least on page of paper hanging out

the back of the  printer to insure proper  paper travel.  Be sure  that the

paper supply box  is aligned with the  paper tractors.  The  printer should

always be left ON-LINE unless it is being serviced or there is a problem.


        1.4.5.2    Positioning the Forms Tractors
                   Positioning the Forms Tractors
                   Positioning the Forms Tractors
                   Positioning the Forms Tractors

        For normal 14 inch paper the sprockets on the forms paper should be

aligned at about character  position -6 on the  left and 138 on  the right.

The left arrowhead  will be visible through  the first sprocket  hole above

the aluminum bar.  For the 8 1/2 inch 3 hole punched paper (see  LPA below)

the sprockets should be  at about -10 on  the left.  The paper  should ride

comfortably on the sprockets with neither tension nor slop.


        1.4.5.3    The Printer Ribbon
                   The Printer Ribbon
                   The Printer Ribbon
                   The Printer Ribbon

        The printer ribbon is  turned over every morning and  changed about

once a week.  It is removed by first removing the bar containing  the print

position indicator by turning the twist  lock tabs at each end of  the bar.

Then the two spring loaded plungers are pulled at the right end of the drum

gate as the ribbon rolls are  removed.  If the ribbon is just  being turned

over (end to end)  then the two rolls can  just be exchanged top  to bottom

(note that the ribbon  feeds on and off the  extreme top and bottom  of the




October 1979                        25               SUMEX Operator's Guide
KI-10                       The Printer Ribbon                  Section 1.4


unit. It  is important when  returning the print  position bar to  the unit

that the ribbon is properly positioned in the recess in the  bars companion

piece or the ribbon will simply be bound fast when the twist lock  tabs are

secured.   Insure that  the ribbon  reversing switch  levers are  not being

fouled by the ribbon.  The reversing  bars on the ribbon must always  be on

the roll side of the switches.


        1.4.5.4    LPA Printing (narrow paper)
                   LPA Printing (narrow paper)
                   LPA Printing (narrow paper)
                   LPA Printing (narrow paper)

        Each evening the operator  should check the print queue  (using the

SHOW PRINTER-QUEUE command) to see if any LPA printing has  been requested.

If so the following procedure is used:

1. Set the printer OFF-LINE
2. Run the forms  program to set the paper
   type to narrow in the following manner:
@FORMS <cr>
 FORMS <cr>
 FORMS <cr>
 FORMS <cr>
WHICH PRINTER? LPT:
               L
               L
               L
FORMS ARE WIDE
LAST CHANGED BY SCHOEN 5-mar-79 1300
CHANGE TO: NARROW
           N
           N
           N
DONE.
@
3. Set the printer back ON-LINE.
4. When all of the queued LPA printing is
   complete,  repeats  steps 1 to 3 above
   but  set  the  forms to wide (CHANGE TO: W).
                                            W
                                            W
                                            W



        1.4.5.5    Removing Listing Jobs from the Print Queue
                   Removing Listing Jobs from the Print Queue
                   Removing Listing Jobs from the Print Queue
                   Removing Listing Jobs from the Print Queue

        There is  often the  need to  remove printing  jobs from  the print

queue.  The following procedure is used.

!LP <cr>
 LP <cr>
 LP <cr>
 LP <cr>

                Queue     Seq     Size    Job     User
              *  LPT      0234    0013    EXEC    CLAYTON
                 LPT      0235    0013    EXEC    CLAYTON
                 LPT      0236    0013    EXEC    CLAYTON


!UNLIST <cr>
 UNLIST <cr>
 UNLIST <cr>
 UNLIST <cr>
Sequence number? 234 <cr>
                 234 <cr>
                 234 <cr>
                 234 <cr>

SUMEX Operator's Guide              26                         October 1979
KI-10           Removing Listing Jobs from the Print Queue      Section 1.4


Delete request submitted
!





















































October 1979                        27               SUMEX Operator's Guide
KI-10                       Killing directories                 Section 1.4


        1.4.6    Killing directories
                 Killing directories
                 Killing directories
                 Killing directories

        When users leave the  system, their directories are killed  to make

room for  new users.   There is  a definite  procedure involved  in killing

directories so  files from  those directories can  be recovered  if someone

else ever  needs them.   Unless you are  working the  weeknight/Saturday or

Sunday morning shifts, this procedure will take two days.

        When Carole  gives you  a list of  directories to  kill, log  in as

<OPERATOR>, enable, connect to first  directory to be killed, and  flag all

files for archiving with the DON'T DELETE subcommand:
!CONNECT FIRST-DIRECTORY-TO-BE KILLED <cr>
 CONNECT FIRST-DIRECTORY-TO-BE KILLED <cr>
 CONNECT FIRST-DIRECTORY-TO-BE KILLED <cr>
 CONNECT FIRST-DIRECTORY-TO-BE KILLED <cr>
!ARCHIVE *.*;*, <cr>
 ARCHIVE *.*;*, <cr>
 ARCHIVE *.*;*, <cr>
 ARCHIVE *.*;*, <cr>
!!DON'T DELETE <cr>
  DON'T DELETE <cr>
  DON'T DELETE <cr>
  DON'T DELETE <cr>
!! <cr>
   <cr>
   <cr>
   <cr>
        (All the file names are typed out.)


        Connect to the  next directory and  repeat the procedure  until all

the directories are  set for archive.  After  the night's archives  are run

(you  may not  get  to here  until the  next  day unless  you're  doing the

archives), log in as <OPERATOR>,  enable, and start up BSYS.  Use  the BSYS

Incremental Dump mode as follows:

Mount the current Killed Directories Tape (it's stored on the tape rack
behind the KI-10 memory boxes.

!BSYS <cr>
 BSYS <cr>
 BSYS <cr>
 BSYS <cr>

TENEX-BSYS  2.06  3 APR 75

*INC(remental dump) <cr>
 INC                <cr>
 INC                <cr>
 INC                <cr>

Dump since date&time(Y OR N)? Yes <cr>
                              Y   <cr>
                              Y   <cr>
                              Y   <cr>
  enter date and time: 6/1/71 1200 <cr>
                       6/1/71 1200 <cr>
                       6/1/71 1200 <cr>
                       6/1/71 1200 <cr>
  (Or some other fictitious date before
   the advent of SUMEX, so you get all the
   files in the directory.)
entire file system? No <cr>
                    N  <cr>
                    N  <cr>
                    N  <cr>

directory: FIRST DIRECTORY-TO-BE-KILLED <cr>
           FIRST DIRECTORY-TO-BE-KILLED <cr>
           FIRST DIRECTORY-TO-BE-KILLED <cr>
           FIRST DIRECTORY-TO-BE-KILLED <cr>
enter tape unit (mtan:) MTA0: <cr>
                        MTA0: <cr>
                        MTA0: <cr>
                        MTA0: <cr>
listing to file: NIL: <cr>
                 NIL: <cr>
                 NIL: <cr>
                 NIL: <cr>
new tape? No <cr>
          N  <cr>
          N  <cr>
          N  <cr>

SUMEX Operator's Guide              28                         October 1979
KI-10                       Killing directories                 Section 1.4


(If yes the following two questions must be answered
sumex tape number Next sequential tape number <cr>
                  Next sequential tape number <cr>
                  Next sequential tape number <cr>
                  Next sequential tape number <cr>
enter tape id: KILLED DIRECTORY TAPE (next sequential number) <cr>
               KILLED DIRECTORY TAPE (next sequential number) <cr>
               KILLED DIRECTORY TAPE (next sequential number) <cr>
               KILLED DIRECTORY TAPE (next sequential number) <cr>

(It will dump the directory and return with)

        more users? (if none, enter No <cr>,
                                    N  <cr>
                                    N  <cr>
                                    N  <cr>
                     if yes enter Yes <cr>)
                                  Y   <cr>
                                  Y   <cr>
                                  Y   <cr>


        At end of dumping, it  will rewind tape.  Follow the  procedure for

closing an old  tape (Section .1),  but don't close  it unless the  tape is

full.  Just get a listing and keep it on the shelf with the tape.

        Then exit  BSYS and connect  to the first  directory to  be killed.

Delete  all  the  files  in  the  directory  except [ARCHIVE-DIRECTORY].;1.

Expunge the directory and  repeat with the other directories.   Then notify

<CMILLER> that you have killed the directories.

!CONNECT FIRST DIRECTORY-TO-BE-KILLED <cr>
 CONNECT FIRST DIRECTORY-TO-BE-KILLED <cr>
 CONNECT FIRST DIRECTORY-TO-BE-KILLED <cr>
 CONNECT FIRST DIRECTORY-TO-BE-KILLED <cr>
!DELETE *.*;* <cr>
 DELETE *.*;* <cr>
 DELETE *.*;* <cr>
 DELETE *.*;* <cr>

  .
  .
  .

!UNDELETE [ARCHIVE-DIRECTORY].;1 <cr>
 UNDELETE [ARCHIVE-DIRECTORY].;1 <cr>
 UNDELETE [ARCHIVE-DIRECTORY].;1 <cr>
 UNDELETE [ARCHIVE-DIRECTORY].;1 <cr>
        (It shouldn't be deleted, anyway.  This is
         just for safety's sake.)

!EXPUNGE <cr>
 EXPUNGE <cr>
 EXPUNGE <cr>
 EXPUNGE <cr>

        Repeat with the others and let Carole know you've done your stuff.



        1.5    Bringing the SUMEX dual KI-10's up and down
               Bringing the SUMEX dual KI-10's up and down
               Bringing the SUMEX dual KI-10's up and down
               Bringing the SUMEX dual KI-10's up and down

        SUMEX tries  to stay  up as much  as possible  to be  available for

users.  However, there  are times when the  system does go down,  either on

purpose, or by crashing.







October 1979                        29               SUMEX Operator's Guide
KI-10               Bringing the system down gracefully         Section 1.5


        1.5.1    Bringing the system down gracefully
                 Bringing the system down gracefully
                 Bringing the system down gracefully
                 Bringing the system down gracefully

        There  are  times when  the  system  is to  be  stopped  on purpose

(preventative maintenance, need  to reload to  clear hung jobs,  etc).  The

MHALT program schedules a system halt, and access to the monitor  via Mini-

Exec allows you to force a BUGCHK to stop the system.


        1.5.1.1    Using MHALT
                   Using MHALT
                   Using MHALT
                   Using MHALT

!MHALT <cr>
 MHALT <cr>
 MHALT <cr>
 MHALT <cr>

Make HALTS, Q to abort command, ?  for  help
-Halt at MM:DD:YY TTTT <cr>
 H       MM:DD:YY TTTT <cr>
 H       MM:DD:YY TTTT <cr>
 H       MM:DD:YY TTTT <cr>
-Exit and update old file [Confirm] <cr>
 E                                  <cr>
 E                                  <cr>
 E                                  <cr>
!


        1.5.1.2    Unscheduled halts
                   Unscheduled halts
                   Unscheduled halts
                   Unscheduled halts

        If the need exists to bring the system down at a non-scheduled time

the users should be notified in advanced if time permits.  The use of MHALT

as described above is recommended but if some emergency is  developing then

the use of NOTIFY as described below will inform the users that  the system

is coming down.  Sending a message to <SYSTEM> (a system message)  with the

required message in it (of course  there may already be one for  some other

message)  will inform  users  just logging  in  but will  not  inform users

already on  the system.  The  SPECIAL.MESSAGE facility (Section  1.6) might

eventually notify all users, but  it is safer to spread  urgent information

via NOTIFY.  The following is an example of the use of NOTIFY:

!NOTIFY <cr>
 NOTIFY <cr>
 NOTIFY <cr>
 NOTIFY <cr>
TTYS: -1 <cr>
      -1 <cr>
      -1 <cr>
      -1 <cr>
MESSAGE: !!! TENEX GOING DOWN IN FIVE MINUTES DUE TO EMERGENCY !!! ^D
         !!! TENEX GOING DOWN IN FIVE MINUTES DUE TO EMERGENCY !!! ^D
         !!! TENEX GOING DOWN IN FIVE MINUTES DUE TO EMERGENCY !!! ^D
         !!! TENEX GOING DOWN IN FIVE MINUTES DUE TO EMERGENCY !!! ^D
!!! TENEX GOING DOWN IN FIVE MINUTES DUE TO EMERGENCY !!!
!


The operator should be enabled at this time.  Entering the command:

wLOGOUT -1<cr>
 LOGOUT -1<cr>
 LOGOUT -1<cr>
 LOGOUT -1<cr>
[Confirm]<cr>
         <cr>
         <cr>
         <cr>

SUMEX Operator's Guide              30                         October 1979
KI-10                        Unscheduled halts                  Section 1.5


Are you sure you want to kill them all? <cr>
                                        <cr>
                                        <cr>
                                        <cr>


Logs out all jobs except that on the console terminal and job 0.

        Enabling and entering the command QUIT will put the operator in the

MINI-EXEC where a RESET should  be done.  Then the operator should  wait 90

more seconds and do a halt in the MINI-EXEC.  Note that the commands to the

MINI-EXEC expect  only the first  character of each  command and  require a

period as a confirmation character.  The upward arrow can be used  to leave

the MINI-EXEC if one wants to go back to the normal exec level.

!QUIT <CR>
 QUIT <CR>
 QUIT <CR>
 QUIT <CR>
Do you really want the mini-EXEC? [Confirm]  <cr>
                                             <cr>
                                             <cr>
                                             <cr>
.Reset.
 R    .
 R    .
 R    .
.Halt Tenex.
 H         .
 H         .
 H         .

        (Either CPU will catch a BUGCHK a few seconds later)


        The above procedure must be used to bring down the system  if there

is a job logged in on the console terminal when the MHALT removes all other

jobs from the system (of course there will be no need for the NOTIFY).


        1.5.2    Bringing up the system after a crash
                 Bringing up the system after a crash
                 Bringing up the system after a crash
                 Bringing up the system after a crash

        True to the words of the  song, "What goes up must come  down," and

so it is with SUMEX.  Hopefully,  most fatal system errors are few  and far

between,  but   they  do  happen,   and  the  system   grinds  to   a  halt

(alternatively,  a simple  power glitch,  courtesy PG&E  can crash  it even

faster.  Refer to Section 1.6.2).

        The most obvious effect of  a system crash is a dead  terminal.  If

you suspect a crash, look up at the processor lights; if they're frozen, or

in a simple counting loop, then the computer has most  undoubtedly crashed.

There are  countless reasons for  a crash,  but they can  all be  placed in




October 1979                        31               SUMEX Operator's Guide
KI-10              Bringing up the system after a crash         Section 1.5


categories: "external"  and "internal."  An "external"  reason for  a crash

could  be  PG&E,  could  be  the  temperature  in  the  machine  room, etc.

"Internal" reasons  are drum  errors, disk  errors, software  errors, etc.,

etc., etc.

        If the computer crashed because of an "internal" error,  there will

probably be a message printed on the console terminal.  Type an = sign, and

read the number printed in the right half.  There's a table of BUGCHK's and

BUGHLT's  on  the  side  of  CPU1,  on  the  end  facing  CPU0.   Find  the

corresponding error  message, and  place it  in the  log.  If  the computer

crashed because of  an "external" reason, there  won't be a message  on the

console terminal.

        Call Andy Sweer or Tom Rindfleisch, and explain the situation.

        Usually, if the system crashes, the first thing to do, assuming the

computer isn't dead  (there hasn't been a  power blackout), is to  save the

registers and take an emergency crash dump. The CPU which caught the BUGCHK

or BUGHLT will save  its accumulators automatically.  The one  which didn't

will have to have its AC's saved by hand.  Go to the CPU which didn't catch

the error and press the  CONSOLE LOCK, CONSOLE DATALOCK switches  to unlock

the console, then press the  STOP and CLEAR ADDRESS switches and  enter 103

(octal).  Press the START button,  and almost instantly, the red  PROG STOP

light should appear.  If the CPU which caught the error was the master CPU,

CPU0, pointed to by the stained  glass arrow on the left CPU, jump  down to

the next paragraph; if the master CPU didn't catch the error, then stop the

slave CPU (unlock its  console and press STOP)  and on the master  CPU, the

one on which you just saved registers, press STOP, CLEAR ADDRESS  and enter

100 (octal).  Press START. The console terminal will type EDDT.




SUMEX Operator's Guide              32                         October 1979
KI-10              Bringing up the system after a crash         Section 1.5


        Type JSR BUGDMP<esc>X and in about 20 seconds, the  computer should
             JSR BUGDMP<esc>X
             JSR BUGDMP<esc>X
             JSR BUGDMP<esc>X

respond with $DUMP COMPLETE$ If, when you try to call the dump, and nothing

happens (or the computer immediately types a "U") then something  is wrong;

ask Andy or Tom for help.

        Once the dump is complete, the core can be cleared, and  the system

reloaded.  To do this, go to CPU0, press the STOP, RESET, CLEAR ADDRESS and

CLEAR  DATA  buttons.  Turn  off  EXEC  PAGING by  pressing  the  switch so

labelled.  Then  press DEPOSIT  THIS, STOP PAR,  STOP NXM,  REPEAT, DEPOSIT

NEXT.  In about two seconds, the core will be cleared.  Press  STOP, RESET,

STOP PAR, STOP NXM (to shut  off STOP PAR, STOP NXM), and EXEC  PAGING then

make sure octal code 104 is in the read-in device register (to the  left of

the voltmeter).  If it isn't,  place 104 in the register (Press  switches 5

and 9).  Before trying  to reload the system,  make sure that the  STOP PAR

and STOP NXM lights are off on BOTH processors.  There should be a stack of

paper tape on the feed (right) side of the paper tape reader. If everything

is correct, press the READIN  button.  The paper tape will run  through the

reader,  and when  it's done,  the console  terminal will  type  [BOOTS], a

couple of carriage returns,  and a *.  Type <esc>  and fill in the  rest of
                                            <esc>
                                            <esc>
                                            <esc>

the  monitor specifications  which are  written on  a card  on  the console

terminal.  Make  sure that  no sense switches  are set  (upper left  of the

console, above the  READIN device selector) unless  there is a note  on the

console terminal that one is to be  set on a reload.  If a sense  switch is

set, the monitor will breakpoint in EDDT before starting. This can  be done

to set certain special parameters  not in the saved version of  the monitor

(such as which sections of the swapping drum are unusable, etc.).  To start

TENEX from this point, simply type 107<esc>g.
                                   107<esc>g
                                   107<esc>g
                                   107<esc>g

        The system will start checking itself out.  Any time after:


October 1979                        33               SUMEX Operator's Guide
KI-10              Bringing up the system after a crash         Section 1.5


               TENEX RESTARTING, WAIT...
               CHECKDISK STARTING

You can go over  to CPU1 and place 107  in the address register,  and press

STOP, RESET, and START. CPU1 will join CPU0 in processing.  Place 21 in the

address register and set EXEC PAGING if it's not already set.  Also set the

CONSOLE  LOCK and  CONSOLE  DATALOCK switches  to avoid  crashes  caused by

accidentally hitting a console switch.

        The CHECKDISK program takes eight minutes to run.  You  can monitor

its progress  by selecting  USER PAGING  (turn off  EXEC PAGING  first) and

placing 100 octal in the address register of the CPU0.  When it  is sorting

directories, the current directory number is shown; after sorting, the file

number is shown.   Until CHECKDSK finishes,  the system is  unavailable for

users.  When it's done, CHECKDISK prints  out a list of errors it  found in

the file  system; if it  found none,  or corrected all  it found,  then the

system is ready for users.  If there was an uncorrectable error in the file

system, then TENEX  will remain unavailable for  users.  If you  don't know

how to use CHECKDSK to fix the filesystem, CALL SOMEONE IMMEDIATELY!

        If all goes OK, then

               TENEX IN OPERATION

will be printed, and the system is available for users.  Normally, when the

operator logs  in on  a console terminal  or the  DATAMEDIA in  the machine

room, nothing special will be  typed; however, if the system date  and time

isn't set, then the  operator will be asked  for the date and  time.  Don't

fill  it in!   There is  a  special autojob  to do  that.  If  after  a few

minutes, the time  isn't set, then set  it.  There is something  wrong with

the SETTIM program.

!^Eset MM:DD:YY TTTT <cr> (TTTT is 24 hour time, as in 2345)
 ^Eset MM:DD:YY TTTT <cr>
 ^Eset MM:DD:YY TTTT <cr>
 ^Eset MM:DD:YY TTTT <cr>



SUMEX Operator's Guide              34                         October 1979
KI-10              Bringing up the system after a crash         Section 1.5


        Before leaving  CPU0's switch  console, replace  21 in  the address

register,  select  EXEC  PAGING,  and set  the  CONSOLE  LOCK  and DATALOCK

switches.


















































October 1979                        35               SUMEX Operator's Guide
KI-10                          What to do if                    Section 1.6


        1.6    What to do if
               What to do if
               What to do if
               What to do if

        This section is  about all the little  things which often  go wrong

while the  system is running,  and what you  can do about  them.  Sometimes

things go wrong, and nothing can be done them save bringing the system down

and reloading;  other times, all  you need  do is run  a little  program or

change a  location in monitor  space.  There is  also a file  in <OPERATOR>

called  HACKS.ON-THIS-DIRECTORY  which  contains  two-line  descriptions of

various programs on <OPERATOR> which fix up small problems with the system.

        In  case you  have  to notify  users  of problems,  there  exists a

facility to inform users of  important information.  If there is a  file in

<SYSTEM> called SPECIAL.MESSAGE, it will be printed out at the top  of each

SYSTAT, and every time a user gets a new EXEC (such as in LOGIN, INITIALIZE

(Exec), EXEC, etc).  Remember  to delete the SPECIAL.MESSAGE after  it's no

longer needed.

        There  may be  times when  environmental problems  (heat  or power)

threaten the integrity of the system.  If the power becomes erratic, or the

machine room heats  up badly, you  may have to  shut off the  machine room.

DON'T TOUCH THE  POWER SWITCHES OF ANY  PIECES OF EQUIPMENT IN  THE MACHINE

ROOM WITHOUT FIRST CONTACTING TOM OR ANDY.


        1.6.1    Air Conditioning failure
                 Air Conditioning failure
                 Air Conditioning failure
                 Air Conditioning failure

        The machine room  depends on its own  air conditioning to  keep the

inside  temperature  below  70 degrees.   Usually,  the  temperature  is 69

degrees.  If it starts to rise, it's an indication of possible A/C failure.

When the temperature hits 71 degrees, you can probably be assured something

is wrong.   Call 7-5555  and explain that  you are  calling from  the SUMEX

Computer Room, S101, and that the air conditioning is not  working properly



SUMEX Operator's Guide              36                         October 1979
KI-10                    Air Conditioning failure               Section 1.6


and MUST be  serviced immediately.  If the  temperature gets as high  as 75

degrees, open the  doors to the  machine room, get  the large fan  out from

behind CPU0, place it in a doorway,  and turn it on; if there is  no relief

in sight, notify  users via NOTIFY (Section  1.5.1.2) that you may  have to

shut down the system if the Air Conditioning isn't repaired soon.  Also put

out a SPECIAL.MESSAGE  (Section 1.6) explaining  the A/C problem,  and tell

users to save their  files often.  Also call  one of the staff  and explain

the problem.

        If  the temperature  should reach  80 degrees,  notify  that you're

shutting down the system, set a  halt for five minutes later, and  wait for

the Console terminal of CPU0 to type SHUTDOWN COMPLETE.  You can  then halt

the  system via  the Mini-Exec  (again Section  1.5.1.2) and  shut  off the

processors (vis  the POWER switch  on the front  panel). Write  protect the

disk drives  and shut  them off.   When cooler  weather prevails,  power up

everything (remember to Write Enable the disks) and reload the system.


        1.6.2    Power problems
                 Power problems
                 Power problems
                 Power problems

        During the summer, our power supply from PG&E can be flaky.  If the

system crashes from power problems, call 7-5555 and ask them when the power

supply will become  stable again.  If they  can't tell you, perhaps  a good

rule  of thumb  is  to wait  fifteen  minutes or  so  and see  then  if the

maintenance people can tell you something.  The DRANETZ Power  Line Monitor

on the table by the inside  door to the machine room should note  all power

line disturbances.  If, by looking it its printout, you determine the power

supply has stabilized, try to bring the system back up.  Note that  in case

of a real power blackout, where  the power to the machine room is  off, the

DEC components power themselves back up when the power comes back on.  This



October 1979                        37               SUMEX Operator's Guide
KI-10                         Power problems                    Section 1.6


means if the power is coming on and off the processors will turn themselves

on and  off.  It  may be  wise to shut  off DEC  equipment using  the POWER

switch; call someone before doing that!

        When it's up and  running, put out a SPECIAL.MESSAGE  (Section 1.6)

explaining the  unstable power  situation and request  users to  save their

files often.


        1.6.3    Tymnet Auxbld Circuit busy
                 Tymnet Auxbld Circuit busy
                 Tymnet Auxbld Circuit busy
                 Tymnet Auxbld Circuit busy

        Occasionally, the TYMNET  program will leave  the TYMNET in  a busy

state as the result of some  error along the network.  Users trying  to run

TYMNET get "TYMNET  AUXBLD CIRCUIT BUILDER  BUSY, TRY AGAIN  LATER..." This

can   be  fixed   by  zeroing   location  DUXINF   in  the   monitor.   See

<OPERATOR>AUXBLD-UNLOCKING.TXT.


        1.6.4    Spoolr crash
                 Spoolr crash
                 Spoolr crash
                 Spoolr crash

        If the  lineprinter has  stopped printing, even  though there  is a

lineprinter queue, and it's not jammed, out of paper, or  off-line, chances

are the SPOOLR program which runs  the printer has crashed or is  hung.  To

clear this, you must start SPOOLR again:

!SYSTAT "PRINTER" <cr>
 SYSTAT "PRINTER" <cr>
 SYSTAT "PRINTER" <cr>
 SYSTAT "PRINTER" <cr>

Job  TTY  Subsys   %  # Size    Runtime  User<Conn>
   1  Det  EXEC    10  4   55     4:45.0  System<Printer>
!

        Note that the system job  which runs the printer is in  Subsys EXEC

rather than Subsys SPOOLR.  Enabled, connect to that job, load  DDT, record

its  accumulators,  and  save  the core  image  on  a  file  called SPOOLR-

CRASH.DATE.

!ATTACH SYSTEM <cr>
 ATTACH SYSTEM <cr>
 ATTACH SYSTEM <cr>
 ATTACH SYSTEM <cr>
(Password) <cr>
           <cr>
           <cr>
           <cr>
(Job number) 1 <cr>
             1 <cr>
             1 <cr>
             1 <cr>
 Detaching job # 21    (Operator's job number)

SUMEX Operator's Guide              38                         October 1979
KI-10                          Spoolr crash                     Section 1.6


        (The Spoolr runs unenabled)
@DDT <cr>
 DDT <cr>
 DDT <cr>
 DDT <cr>

1/   600035  <lf> (Write this down)
1/           <lf>
1/           <lf>
1/           <lf>
2/      3,,0    <lf> (and this, until you've got all 17 [octal]
                <lf>
                <lf>
                <lf>
                         AC's)

17/     CAM PDL+3,,SPL+20       <cr>
                                <cr>
                                <cr>
                                <cr>
^C                  (then return to the exec)
^C
^C
^C
@SAVE 0 577777 SPOOLR-CRASH.DATE <cr> [New file] <cr>
 SAVE 0 577777 SPOOLR-CRASH.DATE <cr>            <cr>
 SAVE 0 577777 SPOOLR-CRASH.DATE <cr>            <cr>
 SAVE 0 577777 SPOOLR-CRASH.DATE <cr>            <cr>
@RESET <cr>
 RESET <cr>
 RESET <cr>
 RESET <cr>
@GET <SYSTEM>SPOOLR.SAV <cr>
 GET <SYSTEM>SPOOLR.SAV <cr>
 GET <SYSTEM>SPOOLR.SAV <cr>
 GET <SYSTEM>SPOOLR.SAV <cr>
@DETACH <esc> (infile) <esc> - (outfile) <esc> - (and) START <cr>
 DETACH <esc>          <esc>             <esc>         START <cr>
 DETACH <esc>          <esc>             <esc>         START <cr>
 DETACH <esc>          <esc>             <esc>         START <cr>
 Detaching Job # 1


        If the  SPOOLR job crashes  again, something's really  wrong.  Call

someone.   If the  printer  doesn't start,  even though  the  SPOOLR hasn't

appeared to  crash, something  may be wrong  with the  printer or  with the

printer buffer.  Call someone.


        1.6.5    ARPANET problems
                 ARPANET problems
                 ARPANET problems
                 ARPANET problems

        There's not all that much  you can do if the ARPANET  starts having

problems.    The  IMP   (ARPA's   Interface  Message   Processor)   is  the

responsibility of ARPA, and is controlled by the Network Control  Center in

Massachusetts.  If  the LOGTTY  starts spewing forth  an endless  stream of

uncommon IMPBUGS, such  as "RFNM Overdue,"  "ASNTBF failed," etc  (the last

one shouldn't happen), you may  be forced eventually to reload  the system.

Call Tom and explain  what's happening.  It may  turn out that to  wait for

the NCC to fix the problem from their end is the best idea.


        1.6.6    LOGTTY doesn't carriage return
                 LOGTTY doesn't carriage return
                 LOGTTY doesn't carriage return
                 LOGTTY doesn't carriage return

        Every once in a while, a program which outputs to the LOGTTY leaves

the terminal in a strange  state by changing some of the  Control Character

Output Control (CCOC, see the JSYS Manual, chapter 4) bits.  This stops the




October 1979                        39               SUMEX Operator's Guide
KI-10                 LOGTTY doesn't carriage return            Section 1.6


terminal from outputting carriage  returns, so all further typeout  is done

in the same spot (very hard to read).  To fix this, run (you don't  have to

be nabled) <OPERATOR>LOGFIX.  The LOGTTY will do a carriage return, chatter

for a few seconds, then stop.  It should function properly again  until the

same program (we don't know which one) tries typing to it.




        2    The DECsystem 2020
             The DECsystem 2020
             The DECsystem 2020
             The DECsystem 2020

        The  DECsystem  2020  is a  moderately  low-cost  36  bit mainframe

computer   utilizing   an   8080   microprocessor   to   handle   front-end

communications.  The SUMEX configuration  is serviced by 512K words  of MOS

memory, 1 DEC  RP06 disk drive,  and 1 DEC TU-45  tape drive.  It  has been

given  the  system name  "Sumex-2020."  Unlike the  KI-10's,  there  are no

indicator lights or extensive front panel controls, only a few switches and

a key lock.  The only way you can tell the computer is up  (without sitting

down at a terminal) is to see if the STATE light is blinking  on-and-off in

one  second cycles.   The 2020  is a  very reliable  computer, and  has not

experienced any software or hardware problems since its  arrival.  Operator

duties on the 2020 are light; there is no archival system and the only file

backups are  Sunday morning  (full dump)  and Wednesday  night (Incremental

since the last Sunday).

        Currently the  only way to  communicate with the  DECsystem-2020 if

you are logged in on Sumex-Tenex is with the VTTY program.  VTTY allows the

KI-10's to talk  to the 2020  (as well as  talking to several  other sites)

over the one or more TTY lines between the machines.  VTTY is documented in

<DOC>VTTY.DOC on Sumex-Tenex.





SUMEX Operator's Guide              40                         October 1979
2020                      File Backup on the 2020               Section 2.1


        2.1    File Backup on the 2020
               File Backup on the 2020
               File Backup on the 2020
               File Backup on the 2020

        TOPS-20's  DUMPER program  is a  cross between  TOPS-10  BACKUP and

TENEX MINI-DUMPER.  You have a  large number of commands available  to you,

though you need only a few.  An important feature (misfeature?) to remember

is that DUMPER behaves differently  if you are enabled.  An  unenabled user

can log in, mount a tape, start dumper, and type SAVE <cr> and  DUMPER will
                                                 SAVE <cr>
                                                 SAVE <cr>
                                                 SAVE <cr>

save his/her directory.  If an  enabled user types SAVE <cr>,  DUMPER dumps
                                                   SAVE <cr>
                                                   SAVE <cr>
                                                   SAVE <cr>

the entire system.  Thus,  to do a full  dump, you need only  enable, start
    entire
    entire
    entire

DUMPER, and give the SAVE command:

@ENABLE <cr>
 ENABLE <cr>
 ENABLE <cr>
 ENABLE <cr>
!DUMPER <cr>
 DUMPER <cr>
 DUMPER <cr>
 DUMPER <cr>

DUMPER 4(12)-3

DUMPER>SSNAME FULL DUMP...DATE TIME <cr>
       SSNAME FULL DUMP...DATE TIME <cr>
       SSNAME FULL DUMP...DATE TIME <cr>
       SSNAME FULL DUMP...DATE TIME <cr>
DUMPER>LIST DUMP.LISTING <cr>
       LIST DUMP.LISTING <cr>
       LIST DUMP.LISTING <cr>
       LIST DUMP.LISTING <cr>
DUMPER>SAVE <cr>
       SAVE <cr>
       SAVE <cr>
       SAVE <cr>

DUMPER TAPE  1 FULL DUMP...DATE TIME
PS: <ROOT-DIRECTORY>
PS: <SYSTEM>
PS: <SUBSYS>
PS: <ACCOUNTS>
        .
        .
        .
MOUNT NEXT TAPE
                (Mount the tape first)
TAPE SPECIFICATION: MTA0: <cr>
                    MTA0: <cr>
                    MTA0: <cr>
                    MTA0: <cr>
        .
        .
        .
TOTAL FILES DUMPED = 3431
TOTAL PAGES DUMPED = 34450
        (Look familiar?)
DUMPER>UNLOAD <cr>
       UNLOAD <cr>
       UNLOAD <cr>
       UNLOAD <cr>
DUMPER>EXIT <cr>
       EXIT <cr>
       EXIT <cr>
       EXIT <cr>
!

        To do  the incremental  dump on Wednesday  night, replace  the SAVE

command with SAVE/INCREMENTAL <cr>.  You should only need one reel  of tape
             SAVE/INCREMENTAL <cr>
             SAVE/INCREMENTAL <cr>
             SAVE/INCREMENTAL <cr>

for the incrementals; maybe 3-4 on the full dump.


October 1979                        41               SUMEX Operator's Guide
2020                      File Backup on the 2020               Section 2.1


        To restore files, use DUMPER's RESTORE command:

DUMPER>RESTORE *.MAC <esc> <SCHOEN>*.MAC <cr>
       RESTORE *.MAC <esc> <SCHOEN>*.MAC <cr>
       RESTORE *.MAC <esc> <SCHOEN>*.MAC <cr>
       RESTORE *.MAC <esc> <SCHOEN>*.MAC <cr>
DUMPER TAPE  1 FULL DUMP...DATE TIME
Loading files into PS:<SCHOEN>
End of Saveset
DUMPER>



        2.2    Reloading Sumex-2020
               Reloading Sumex-2020
               Reloading Sumex-2020
               Reloading Sumex-2020

        Reloading the 2020 is a simply as pushing a button; as a  matter of

fact,  that's  all  you do.   On  the  front panel  there  are  four rocker

switches:

        ******  ******  ******  ******
        *    *  *    *  *    *  *    *   1
        *++++*  *++++*  *++++*  *++++*
        *    *  *    *  *    *  *    *   0
        ******  ******  ******  ******

         BOOT    LOCK   RESET   POWER


        In true  computer style,  a switch in  position 1  means is  on, in

position 0 means is off.  To reload, unlock the front panel by pressing the

lower half of the LOCK switch.  Then press the top of the BOOT  switch (The

BOOT switch should be a momentary contact switch; it is a little sticky, so

press the bottom to release the switch).  A few seconds later,  the console

terminal should type:

[PS: MOUNTED]

System restarting, wait...
Enter date and time: 10/17/79 1300 <cr>
                     10/17/79 1300 <cr>
                     10/17/79 1300 <cr>
                     10/17/79 1300 <cr>
You have entered Wednesday, October 17, 1979 1300.
Is this correct? (Y,N) Y <cr>
                       Y <cr>
                       Y <cr>
                       Y <cr>
Run CHECKD? (Y,N) N <cr>
                  N <cr>
                  N <cr>
                  N <cr>

Running DDMP

SYSJOB 3A started 10/17/79 1301
        .
        .
        .
[OPERATOR, TTY23: TO * :  System in Operation]

SUMEX Operator's Guide              42                         October 1979
2020                       Reloading Sumex-2020                 Section 2.2


        That's all there is to  it.  Note: if the system catches  a BUGHLT,

it will  reload itself without  need of human  intervention (i.e.  it knows

what time  to set).  BUGCHK's  are basically ignored;  a TOPS-20  BUGCHK is

less  serious  than a  TENEX  BUGCHK (They've  solved  the  implications of

proceeding after a BUGCHK).














































October 1979                        43               SUMEX Operator's Guide



                                   Index
                                   Index
                                   Index
                                   Index




air conditioning  36                   TYMNET AUXBLD CIRCUIT BUILDER BUSY
ARPANET  39                               38


BSYS Single mode  10


crashing  29


Daily dump  14
DECsystem 2020  40
DELD  23
DIRECTORY-PURGER  3, 22
DUMPER  3, 13


FILE BACKUP LOG  2


INTERROGATE  3


KI-10 system  1


lineprinter  24, 38
listing files  7
LOGTTY  39
LPA printing  26


MHALT  30
MINI-EXEC  31


NOTIFY  30


Operator shifts  1


power problems  37


RETRIEVE  3


SAVEID  24
SPECIAL.MESSAGE  36
SUMEX Operator's Guide              44                         October 1979
